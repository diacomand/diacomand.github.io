var st,radioid,playindex,region,btn,update_track,bt,radio=jQuery("#recordplayer").get(0),err=!1,reserve=!1,aezakmi=!1,lastVolume=.8;function stop(){radio.pause(),radio.src="",playindex=null,$(".play").css("display",""),$(".stop").css("display","none"),$(".station").removeClass("active_station")}function playerRestart(){stop(),$(".play").trigger("click")}$(".player-volume").on("input",function(){radio.volume=parseFloat(this.value/10),updatePlayerSettings("ca_lastVolume",radio.volume,"false"),0==radio.volume?$(".fa-volume-up").trigger("click"):($(".fa-volume-mute").css("display","none"),$(".fa-volume-up").css("display","")),$(".player-volume").val(10*radio.volume)}),$(".fa-volume-up").click(function(){lastVolume=radio.volume,radio.volume=0,$(".fa-volume-up").css("display","none"),$(".fa-volume-mute").css("display","")}),$(".fa-volume-mute").click(function(){radio.volume=lastVolume,$(".fa-volume-mute").css("display","none"),$(".fa-volume-up").css("display","")}),$(".stop").click(function(){if(err=!1,1==aezakmi)return radio.pause(),playindex=null,$(".play").css("display",""),$(".stop").css("display","none"),!1;stop()}),$(".station").click(function(){if(aezakmi=!1,region=$(this).attr("region"),st=$(this).attr("st"),playindex==st)stop(),err=!1;else{if(null!==playindex&&(stop(),err=!1),err=!0,$(".artist").text(""),$(".title").text("загрузка..."),"region"==region||"regions"==region?$(".img_track").html('<i class="icon-st-rr"></i>'):$(".img_track").html('<i class="icon-station-'+st+'"></i>'),$(".footer_img_track").html('<i class="fas fa-music"></i>'),lastimg="logo",clearInterval(update_track),"36-6"==st)return $(".namestation").text("«36.6» Record Live Stream 3.0"),radio.src="https://air.recordmsk.net:8100/fest_"+bt,update_track=setInterval("update_track_internet()",5e3),update_track_internet(),radio.playbackRate=1,$(this).addClass("active_station"),playindex=st,$(".play").css("display","none"),$(".stop").css("display",""),radio.play(),!1;switch(region){case"regions":"rr"==st&&$(".namestation").text("Radio Record "+$(this).children(".radioname").text()),radio.src=$(this).attr("radiourl"),update_track=setInterval("update_track_region()",5e3),update_track_region();break;case"region":"rr"==st&&$(".namestation").text("Radio Record"),radio.src=320==bt?"https://air2.radiorecord.ru:8101/rr_high":128==bt?"https://air2.radiorecord.ru:8101/rr_128":"https://air2.radiorecord.ru:8100/rr_"+bt,1==reserve&&(radio.src=320==bt?"https://air.recordmsk.net:8100/rr320_reserve":128==bt?"https://air.recordmsk.net:8100/rr128_reserve":"https://air.recordmsk.net:8100/rr64_reserve",$(".namestation").text("Radio Record (Резерв)")),update_track=setInterval("update_track_internet()",5e3),update_track_internet();break;case"spb":$(".namestation").text("Radio Record Санкт-Петербург"),radio.src="https://air2.radiorecord.ru:8101/rr_spb",1==reserve&&(radio.src="https://air.recordmsk.net:8100/rr320_reserve"),update_track=setInterval("update_track_internet()",5e3),update_track_internet();break;case"internet":"sd90"==st?$(".namestation").text("Супердискотека 90-х"):$(".namestation").text($(this).children(".radioname").text()),progress_off(),radio.src="https://air2.radiorecord.ru:8102/"+st+"_"+bt,update_track=setInterval("update_track_internet()",5e3),update_track_internet()}$(".radio-logo").html('<i class="icon-st-'+st+'"></i>'),playindex=st,$(".play").css("display","none"),$(".stop").css("display",""),$(this).addClass("active_station"),radio.playbackRate="kaz"==radioid&&"regions"==region&&"rr"==st?1.011111:1,radio.play(),updatePlayerSettings("ca_lastStation",st,"false"),changeHistory()}}),$(".play").click(function(){if($(".play").css("display","none"),$(".stop").css("display",""),1==aezakmi)return radio.play(),!1;switch(btn=".record-"+st,region){case"region":radio.src=320==bt?"https://air2.radiorecord.ru:8101/rr_high":128==bt?"https://air2.radiorecord.ru:8101/rr_128":"https://air2.radiorecord.ru:8100/rr_"+bt,1==reserve&&(radio.src=320==bt?"https://air.recordmsk.net:8100/rr320_reserve":128==bt?"https://air.recordmsk.net:8100/rr128_reserve":"https://air.recordmsk.net:8100/rr64_reserve");break;case"spb":radio.src="https://air2.radiorecord.ru:8101/rr_spb",1==reserve&&(radio.src="https://air.recordmsk.net:8100/rr320_reserve");break;case"regions":radio.src=$(btn).attr("radiourl");break;case"internet":radio.src="https://air2.radiorecord.ru:8102/"+st+"_"+bt}"36-6"==st&&(radio.src="https://air.recordmsk.net:8100/fest_"+bt),$(".radios").children("[st = "+st+"]").addClass("active_station"),playindex=st,radio.playbackRate="kaz"==radioid&&"regions"==region&&"rr"==st?1.011111:1,err=!0,radio.play()}),document.onkeydown=function(e){178==e.keyCode&&$(".stop").trigger("click"),179==e.keyCode&&(null==playindex?$(".play").trigger("click"):$(".stop").trigger("click"))},radio.addEventListener("error",function(){1==err&&(stop(),err=!1,alert("При проигрывании произошла ошибка:\n\nНе удалось подключиться к серверу Рекорда."))},!1),radio.addEventListener("ended",function(){if(1==aezakmi)return radio.play(),!1;err=!1,stop(),alert("При проигрывании произошла ошибка:\n\nКонец потока.\nВозможно, у вас пропал интернет или Рекорд приостановил трансляцию станции.")},!1),$(".bitrate-btn").click(function(){if(bt==$(this).attr("value"))return!1;var e=!1;0<radio.currentTime&&(e=!0),$(".bitrate-btn").removeClass("active"),$(this).addClass("active"),bt=$(this).attr("value"),updatePlayerSettings("ca_bitrate",bt,"false"),1==e&&playerRestart()}),$('input[name="saveRadioSettings"]').change(function(){new Date((new Date).getTime()+2592e6);$(this).prop("checked")?(saveRadioSettings="true",updatePlayerSettings("ca_saveRadioSettings","true","false"),updatePlayerSettings("ca_lastStation",st,"false"),updatePlayerSettings("ca_lastVolume",radio.volume,"false")):(updatePlayerSettings("ca_saveRadioSettings","false","false"),updatePlayerSettings("ca_lastStation","null","true"),updatePlayerSettings("ca_lastVolume","null","true"),saveRadioSettings="false")}),$('input[name="replaceSPB"]').change(function(){new Date((new Date).getTime()+2592e6);if($(this).prop("checked")){if(updatePlayerSettings("ca_spb","true","false"),$(".radios").children(".record-rr").attr("region","spb"),$(".radios").children(".record-rr").children(".radioname").text("Питер"),"rr"==st){if(bt==$(this).attr("value"))return!1;var e=!1;region="spb",0<radio.currentTime&&(e=!0),$(".namestation").text("Radio Record Санкт-Петербург"),1==e&&playerRestart()}}else if(updatePlayerSettings("ca_spb","false","false"),$(".radios").children(".record-rr").attr("region","region"),$(".radios").children(".record-rr").children(".radioname").text("Record"),"rr"==st){if(bt==$(this).attr("value"))return!1;e=!1;region="region",0<radio.currentTime&&(e=!0),$(".namestation").text("Radio Record"),1==e&&playerRestart()}});